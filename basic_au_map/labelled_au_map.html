<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <title>Australia</title>
    <script type="text/javascript" src="../lib/d3.v310.js"></script>
    <style type="text/css">

#states path {
  stroke: #fff;
}

text{
  font-family: Helvetica;
  font-weight: 300;
  font-size: 12px;
}

#happy{
  font-size: 16px;
}

#funny{
  background: rgba(0,153,76,0.8);
}

    </style>
  </head>
  <body>
  <h1>Australian Map with Labels</h1>
<script type="text/javascript">

var width = 960,
    height = 500;

var happy_style = {"font-size": "48"};
var funny_style = {"background": "rgba(0,153,76,0.8)"};

var locations = [
{
    name: "Sydney",
    lat: -33,
    lon: 151,
    css_class: "happy",
    css_style: happy_style
},{
    name: "otherpoint",
    lat: -15,
    lon: 125,
    css_class: "funny",
    css_style: funny_style
}];


var projection = d3.geo.mercator()
    .center([135, -26])
    .scale(700);

var path = d3.geo.path()
    .projection(projection);

var svg = d3.select("body").append("svg")
    .attr("width", width)
    .attr("height", height);

var states = svg.append("g")
    .attr("id", "states");

d3.json("../data/au-states.geojson", function(error, data) {
  states.selectAll("path")
      .data(data.features)
    .enter().append("path")
      .attr("d", path);
});


var locationPoints = svg.selectAll('circle').data(locations);
var locationText = svg.selectAll('text').data(locations);

locationPoints.enter()
  .append('circle')
  .attr('cx', function(d) {return projection([d.lon, d.lat])[0]})
  .attr('cy', function(d) {return projection([d.lon, d.lat])[1]})
  .attr('r', 4)
  .attr('fill', 'steelblue');

locationText.enter()
  .append('text')
  .attr('x', function(d) {return projection([d.lon, d.lat])[0]})
  .attr('y', function(d) {return projection([d.lon, d.lat])[1]})
  .attr('dx', 5)
  .attr('dy', 3)
  //.classed(function(d) { return d.css_class}, true)
  .style(function(d) {return d.css_style})
  .attr('font-size', 124)
  .attr('fill', 'red')
  .text(function(d) {return d.name});


</script>
Testing labelling
</body>
</html>
